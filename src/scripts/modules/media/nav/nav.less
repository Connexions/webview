@import "../../../../styles/variables.less";
@import "../../../../styles/mixins.less";

@nav-height: 4.9rem;
@progress-height: 0.9rem;
@button-width: 13rem;
@searchbar-margin: 3px;

.media-nav {
  padding: 1rem;

  &:not(.publishing) {
    background-color: @gray-lightest;
  }

  @media (max-width: @landscape-breakpoint) {
    padding: 0 1rem;
  }

  > .media-toolbar {
    > div,
    > span {
      display: inline-block;
      vertical-align: bottom;
    }

    .toggle.btn {
      width: @button-width;
      margin: @searchbar-margin;
      border: solid 2px @brand-primary;
      background-color: @brand-primary;
      color: white;
      .text {
        margin: 0 6px;
      }
      &.open {
        background-color: white;
        color: @brand-primary;
      }
      &:focus {
        box-shadow: 0 0 3px 2px lightblue;
      }
    }

    .searchbar {
      @media (max-width: @landscape-breakpoint) {
        width: ~"calc(100% - " @button-width ~"- 3rem)";
      }
      position: relative;
      width: ~"calc(35% - " @button-width * .5 ~")";
      margin: @searchbar-margin;
      .fa {
        position: absolute;
        top: 0.3em;
        left: ~"calc(100% - 27px)";
        color: @gray-light;
        font-size: 150%;
        &.clear-search {
          cursor: pointer;
        }
        &.fa-search {
          cursor: pointer;
        }

      }
    }

    .media-navbar {
      width: ~"calc(65% - " @button-width * .7 ~")";
      @media (max-width: @landscape-breakpoint) {
        display: block;
        width: 100%;
      }

      > .book-nav {
        .flexbox();
        .flex-flow(row; nowrap);
        .justify-content(center);
        .user-select(none);

        > .progress, > .back-to-top {
          .flex(1; 1; 75%);
        }

        > .progress {
          height: @progress-height;
          margin-top: 1.4rem;
          margin-bottom: 0;
          border-radius: 0.8rem;
          background-color: darken(@gray-lighter, 5%);
          box-shadow: none;

          > .progress-bar {
            .box-sizing(content-box); // Prevent the white border from being visible at 100% progress
            border-right: 0.1rem solid white;
            box-shadow: none;
          }
        }

        > .back-to-top {
          line-height: @nav-height;
          text-align: center;

          > a {
            display: inline-block;
            padding: 0 0.5rem;
          }

          &::before, &::after {
            color: @link-color;
            font-size: 1.4em;
            content: "\25b4"; // â–´
          }
        }

        > .nav {
          display: flex;
          color: @brand-primary;
          font-size: 1.6rem;
          line-height: 3.8rem;

          &.disabled {
            opacity: 0.5;
          }
        }

        > .back {
          padding-right: 1rem;
          text-align: right;

          &:before {
            // Flip the background-image horizontally
            -ms-transform: scaleX(-1);
            -webkit-transform: scaleX(-1);
            transform: scaleX(-1);
          }
        }

        > .next {
          padding-left: 2rem;
          text-align: left;
        }

        > .back::before, > .next::after {
          display: inline-block;
          width: 1.6rem;
          height: 1.6rem;
          margin: 1rem 1rem 0;
          border-radius: 50%;
          background: @brand-primary url("/images/icons/arrow-white.png") no-repeat 0.6rem center;
          background-size: 40%;
          color: white;
          content: "";
          vertical-align: text-bottom;
        }
      }
    }
  }

  .toc-panel {
    display: none;
    width: 100%;
    border: solid 2px @gray-lightest;
    background-color: white;
  }
}

.footer-nav {
  .media-nav > .media-toolbar > .media-navbar {
    width: 100%;
  }
}

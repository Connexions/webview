@import "../../../../styles/variables.less";
@import "../../../../styles/mixins.less";

@blue: @brand-primary;
@page-width: 75%;

.media-body {
  margin: 0 60px;
  padding: 40px 0;
  counter-reset: figure;

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    margin-bottom: 15px;
    color: @gray-dark;
  }

  p {
    margin: 10px 0 0;
    color: @gray;
  }

  > section,
  > figure,
  > p,
  > .abstract,
  > table {
    &:first-child {
      margin-top: 0 !important; // Ensure first element has no top margin
    }
  }

  > section,
  > figure {
    margin-top: 60px;
  }

  section > section,
  section > figure {
    margin-top: 30px;
  }

  figure {
    display: table;
    table-layout: fixed;
    width: 100%;
    color: @gray;
    counter-increment: figure;

    > figcaption {
      display: table-caption;
      padding: 10px;
      font-size: 1.3rem;
      caption-side: bottom;

      &::before {
        margin-right: 5px;
        color: @gray-medium;
        font-weight: bold;
        content: "Figure " counter(figure) ".";
      }
    }

    > .media {
      display: block;
      margin: 0;
      text-align: center;
    }

    > figure {
      display: table-cell;
    }
  }

  .footnote {
    font-size: 1rem;
  }

  .abstract {
    position: relative;
    background-color: @gray-lightest;
    padding: 45px 15px 15px 15px;
    margin: 30px 6rem 0 6rem;

    ul {
      margin: 15px 0 0 0;

      &::after {
        position: absolute;
        top: 15px;
        left: 15px;
        font-size: 1.5rem;
        font-weight: bold;
        color: @gray;
        text-transform: uppercase;
        letter-spacing: 1px;
        content: "Abstract";
      }
    }
  }

  .example,
  .exercise,
  .note {
    margin: 30px 6rem 0 6rem;

    > header {
      border-bottom: 1px solid @gray;

      > .title {
        display: inline-block;
        font-size: 1.5rem;
        text-transform: uppercase;
        letter-spacing: 1px;

        &::before {
          content: ""; // Override content below if desired
          margin-right: 10px;
        }
      }
    }

    > section {
      padding: 5px 15px;
      background-color: @gray-lightest;
    }
  }

  .example,
  .exercise {
    > header {
      border-bottom: 1px solid @gray;

      > .title {
        padding: 0.1em 1em;
        font-weight: bold;
        color: @gray-lightest;
        background-color: @gray;
      }
    }

    .problem,
    .solution {
      padding: 0.5em 1em;
    }

    .solution {
      border-top: 1px solid @gray;
    }

    &[data-type=check-understanding] .title::before {
      margin-right: 0;
      content: "";
    }

    &[data-type=conceptual-questions] .problem {
      border-top: none;

      p {
        margin: 0;
      }
    }

    &[data-type=problems-exercises] {
      .problem::before, .solution::before {
        font-weight: bold;
        color: @gray;
        text-transform: uppercase;
        letter-spacing: 1px;
      }

      .problem::before {
        content: "Problem";
      }

      .solution::before {
        content: "Solution"
      }
    }
  }

  .note {
    padding: 15px;
    background-color: @gray-lightest;

    > header {
      border-bottom: none;

      > .title {
        padding: 0;
        font-weight: normal;
        border-bottom: 1px solid;
        color: @gray;
        background-color: none;
      }
    }
  }

  .example > header > .title::before {
    content: "Example:";
  }

  .exercise > header > .title::before {
    content: "Exercise:";
  }

  .note > header > .title::before {
    content: "Note:";
  }

  //
  // Tables
  // --------------------------------------------------
  table {
    margin-top: 60px;
    width: 100%;
    max-width: 100%;
    margin-bottom: @line-height-computed;
    background-color: @table-bg;

    caption {
      font-size: 1.75rem;

      sup {
        top: auto;
        line-height: inherit;
      }
    }

    // Cells
    thead,
    tbody,
    tfoot {
      > tr {
        > th,
        > td {
          padding: @table-cell-padding;
          line-height: @line-height-base;
          vertical-align: top;
          border-top: 1px solid @table-border-color;
        }
      }
    }

    // Bottom align for column headings
    thead > tr > th,
    thead > tr > td {
      vertical-align: bottom;
      border-bottom: 2px solid @table-border-color;
      font-weight: bold;
      text-align: left;
    }

    // Remove top border from thead by default
    caption + thead,
    colgroup + thead,
    thead:first-child {
      tr:first-child {
        th, td {
          border-top: 0;
        }
      }
    }

    // Account for multiple tbody instances
    tbody + tbody {
      border-top: 2px solid @table-border-color;
    }

    // Nesting
    table {
      background-color: @body-bg;
    }

    // Zebra striping
    > tbody {
      > tr:nth-child(odd) {
        > td,
        > th {
          background-color: @table-bg-accent;
        }
      }
    }
  }
}
